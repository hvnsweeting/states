{
    "ServiceSettings": {
        "ListenAddress": "127.0.0.1:8065",
        "MaximumLoginAttempts": 10,
        "SegmentDeveloperKey": "",
        "GoogleDeveloperKey": "",
        "EnableOAuthServiceProvider": false,
        "EnableIncomingWebhooks": {% if salt['pillar.get']('mattermost:enable_incoming_webhook', True) %}true{% else %}false{% endif %},
        "EnableOutgoingWebhooks": false,
        "EnableCommands": false,
        "EnableOnlyAdminIntegrations": true,
        "EnablePostUsernameOverride": false,
        "EnablePostIconOverride": {% if salt['pillar.get']('mattermost:enable_post_icon_override', True) %}true{% else %}false{% endif %},
        "EnableTesting": false,
        "EnableDeveloper": false,
        "EnableSecurityFixAlert": true,
        "EnableInsecureOutgoingConnections": false,
        "EnableMultifactorAuthentication": false,
        "AllowCorsFrom": "",
        "SessionLengthWebInDays": 30,
        "SessionLengthMobileInDays": 30,
        "SessionLengthSSOInDays": 30,
        "SessionCacheInMinutes": 10,
        "WebsocketSecurePort": 443,
        "WebsocketPort": 80,
        "WebserverMode": "regular"
    },
    "TeamSettings": {
        "SiteName": "Mattermost",
        "MaxUsersPerTeam": 50,
        "EnableTeamCreation": {% if salt['pillar.get']('mattermost:enable_team_creation', True) %}true{% else %}false{% endif %},
        "EnableUserCreation": {% if salt['pillar.get']('mattermost:enable_user_creation', True) %}true{% else %}false{% endif %},
        "EnableOpenServer": false,
        "RestrictCreationToDomains": "",
        "RestrictTeamNames": true,
        "EnableCustomBrand": false,
        "CustomBrandText": "",
        "RestrictDirectMessage": "any"
    },
    "SqlSettings": {
        "DriverName": "postgres",
        "DataSource": "postgres://mattermost:{{ salt['password.pillar']('mattermost:db:password', 10) }}@127.0.0.1:5432/mattermost?sslmode=disable&connect_timeout=10",
        "DataSourceReplicas": [],
        "MaxIdleConns": 10,
        "MaxOpenConns": 10,
        "Trace": false,
        "AtRestEncryptKey": "{{ salt['password.pillar']('mattermost:at_rest_encrypt_key', 32) }}"
    },
    "LogSettings": {
        "EnableConsole": false,
        "ConsoleLevel": "WARNING",
        "EnableFile": true,
        "FileLevel": "WARNING",
        "FileFormat": "",
        "FileLocation": "/var/log/mattermost/mattermost.log"
    },
    "FileSettings": {
        "DriverName": "local",
        "Directory": "/var/lib/mattermost/",
        "EnablePublicLink": true,
        "PublicLinkSalt": "{{ salt['password.pillar']('mattermost:public_link_salt', 32) }}",
        "ThumbnailWidth": 120,
        "ThumbnailHeight": 100,
        "PreviewWidth": 1024,
        "PreviewHeight": 0,
        "ProfileWidth": 128,
        "ProfileHeight": 128,
        "InitialFont": "luximbi.ttf",
        "AmazonS3AccessKeyId": "",
        "AmazonS3SecretAccessKey": "",
        "AmazonS3Bucket": "",
        "AmazonS3Region": "",
        "AmazonS3Endpoint": "",
        "AmazonS3BucketEndpoint": "",
        "AmazonS3LocationConstraint": false,
        "AmazonS3LowercaseBucket": false
    },
    "EmailSettings": {
        "EnableSignUpWithEmail": true,
        "EnableSignInWithEmail": true,
        "EnableSignInWithUsername": true,
        "SendEmailNotifications": true,
        "RequireEmailVerification": true,
        "FeedbackName": "No Reply",
{%- set smtp = salt['pillar.get']('smtp') %}
        "FeedbackEmail": "{{ smtp['from'] }}",
        "SMTPUsername": "{{ smtp['user'] }}",
        "SMTPPassword": "{{ smtp['password'] }}",
        "SMTPServer": "{{ smtp['server'] }}",
        "SMTPPort": "{{ smtp['port'] }}",
        "ConnectionSecurity": "TLS",
        "InviteSalt": "{{ salt['password.pillar']('mattermost:invite_salt', 32) }}",
        "PasswordResetSalt": "{{ salt['password.pillar']('mattermost:password_reset_salt', 32) }}",
        "SendPushNotifications": false,
        "PushNotificationServer": "",
        "PushNotificationContents": "generic"
    },
    "RateLimitSettings": {
        "EnableRateLimiter": true,
        "PerSec": 10,
        "MemoryStoreSize": 10000,
        "VaryByRemoteAddr": true,
        "VaryByHeader": "X-Real-IP"
    },
    "PrivacySettings": {
        "ShowEmailAddress": true,
        "ShowFullName": true
    },
    "GitLabSettings": {
        "Enable": false,
        "Secret": "",
        "Id": "",
        "Scope": "",
        "AuthEndpoint": "",
        "TokenEndpoint": "",
        "UserApiEndpoint": ""
    }
}
